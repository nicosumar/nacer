= javascript_include_tag 'jstree.min.js'
= javascript_include_tag 'documentos_electronicos.js'
= stylesheet_link_tag 'jstree/style.min.css'
- content_for :title do
  Documentos electronicos - Sumar
#content-header
  %h1 Informes de Liquidacion - Sumar


#content-body
  %h2.first-header Buscar documentos electronicos
  = text_field_tag 'arbol_q', nil, {placeholder: "Ingrese los terminos a buscar", style: "display:block; border-radius:4px; border:1px solid silver;", size: 70}
  %br

  #arbol
    - @arbol_de_efectores.each do |admin_u_hospital|
      %ul
        %li{id: "#{admin_u_hospital[:id]}", "data-jstree" =>  '{"icon": "'+ image_path(admin_u_hospital[:imagen]) +'"}'}
          = admin_u_hospital[:rotulo]
          - admin_u_hospital[:hijos].each do |administrado|
            %ul
              %li{id: "#{administrado[:id]}", "data-jstree" =>  '{"icon": "'+ image_path(administrado[:imagen]) +'"}'}
                = administrado[:rotulo]
                - administrado[:hijos].each do |concepto|
                  %ul
                    %li{id: "#{concepto[:id]}", "data-jstree" =>  '{"icon": "'+ image_path(concepto[:imagen]) +'"}'}
                      = concepto[:rotulo]
                      -concepto[:hijos].each do |periodo|
                        %ul
                          %li{id: "#{periodo[:id]}", "data-jstree" =>  '{"icon": "'+ image_path(periodo[:imagen]) +'"}'}
                            = periodo[:rotulo]

  = form_tag(documentos_electronicos_index_path, method:  :get) do 
    = dump_filter_parameters_as_hidden_fields(@efector_documentos)
    .field
      = label_tag "Efector:"
      = select_tag 'efector_id', options_for_select(@efectores, @efector_id), {:class => 'multi_select'}
    = submit_tag "Buscar"

  %br
  %br
  - if @efector.present?
    %h2.first-header= "#{@efector.nombre}"
    %h2.second-header Documentos referidos a Liquidaciones Sumar
    = render partial: 'grid', locals: {efector: @efector}
